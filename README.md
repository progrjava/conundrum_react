# Conundrum

## Архитектура

Проект состоит из двух сервисов:  

1. **Backend (Node.js / Express)**  
   - Обрабатывает API-запросы, LTI-интеграцию и генерацию PDF.  
   - Подключается к Supabase для хранения данных.  

2. **Frontend (React SPA)**  
   - Интерфейс пользователя, коммуникация с backend через Nginx.  
   - Поддержка LTI и SPA-маршрутов.  

**Nginx**  
   - Реверс-прокси для API и статики.  
   - Обеспечивает корректную работу SPA и скрывает реальные адреса backend.  

**Docker / docker-compose**  
   - Backend и frontend в отдельных контейнерах.  
   - Внутри Docker-сети контейнеры общаются напрямую.  
   - Настроены health-check для контроля состояния сервисов.  

## Процесс развертывания

Перед запуском проекта необходимо создать файлы `.env` для backend и frontend, ориентируясь на предоставленные `.env.example` файлы. Заполните все необходимые значения переменных окружения в этих файлах.  

После того как переменные окружения настроены, проект можно развернуть одной командой:

```bash
docker compose up -d --build
```
Эта команда:
- Собирает и запускает контейнеры backend и frontend.
- Настраивает внутреннюю Docker-сеть, чтобы сервисы общались напрямую.
- Поднимает все зависимости, включая Nginx для фронтенда и проксирования API-запросов.

После успешного запуска (локально):
- Фронтенд доступен в браузере по адресу http://localhost
 (порт 80).
- Backend API доступен внутри сети docker (http://conundrum-server:5000)


Health-check эндпоинты включены для проверки работоспособности сервисов:
- Backend: /api/health
- Frontend: доступность статической страницы /gamegenerator

Для просмотра логов можно использовать:
```bash
docker compose logs -f
```

Для остановки контнейнеров:
```bash
docker compose down
```